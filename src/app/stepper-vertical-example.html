<button
  class="btn btn-primary"
  (click)="isLinear = !isLinear"
  id="toggle-linear"
>
  {{!isLinear ? 'Enable linear mode' : 'Disable linear mode'}}
</button>
<div [formGroup]="mainFormGroup">
  <mat-stepper
    orientation="vertical"
    [linear]="isLinear"
    formArrayName="stepData"
    linear
    #stepper="matHorizontalStepper"
    [selectedIndex]="currentStep"
  >
    <mat-step
      *ngFor="let stepForm of stepData.controls; let i = index"
      [stepControl]="stepForm"
    >
      <div [formGroupName]="i">
        <ng-template matStepLabel> {{ i + 1 }} Step</ng-template>
        <mat-form-field>
          <mat-label>Name</mat-label>
          <input matInput formControlName="name" placeholder="Name" required />
        </mat-form-field>
        <div>
          <button
            class="btn btn-primary me-1"
            matStepperNext
            (click)="addInput(i)"
          >
            Add Rules
          </button>
          <button class="btn btn-primary" matStepperNext (click)="addInput(i)">
            Next
          </button>
        </div>
      </div>
    </mat-step>
  </mat-stepper>
</div>

<!-- Copyright 2021 Google LLC. All Rights Reserved.
    Use of this source code is governed by an MIT-style license that
    can be found in the LICENSE file at http://angular.io/license -->
